"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),C=require("./index-CpF0vCd7.cjs"),T=["innerHTML"],b=t.defineComponent({__name:"MazIcon",props:{src:{type:String,default:void 0},path:{type:String,default:void 0},name:{type:String,default:void 0},size:{type:String,default:void 0},title:{type:String,default:void 0},transformSource:{type:Function,default:a=>a}},emits:["loaded","unloaded","error"],setup(a,{emit:f}){const i={},s=t.ref(),d=t.ref(),g=()=>{try{return C.injectStrict("mazIconPath")}catch{return}},l=a,u=f,m=t.computed(()=>l.path??g()),p=t.computed(()=>l.src?l.src:m.value?`${m.value}/${l.name}.svg`:`/${l.name}.svg`);t.onMounted(()=>{!l.name&&!l.src&&console.error('[maz-ui](MazIcon) you should provide "name" or "src" as prop')});const h=(e,r)=>{const n=e.querySelectorAll("title");if(n.length>0)n[0].textContent=r;else{const o=document.createElementNS("http://www.w3.org/2000/svg","title");o.textContent=r,e.append(o)}},S=e=>Object.keys(e).reduce((r,n)=>(e[n]!==!1&&e[n]!==null&&e[n]!==void 0&&(r[n]=e[n]),r),{}),y=e=>{const r={},n=e.attributes;if(!n)return r;for(let o=n.length-1;o>=0;o--)r[n[o].name]=n[o].value;return r},w=e=>{let r=e.cloneNode(!0);return r=l.transformSource(e),l.title&&h(r,l.title),e.innerHTML},E=async e=>{i[e]||(i[e]=M(e));try{s.value=await i[e],await t.nextTick(),u("loaded",d.value)}catch(r){s.value&&(s.value=void 0,u("unloaded")),delete i[e],u("error",r)}},M=e=>new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.addEventListener("load",()=>{if(o.status>=200&&o.status<400)try{let c=new DOMParser().parseFromString(o.responseText,"text/xml").querySelectorAll("svg")[0];c?(c=l.transformSource(c),r(c)):n(new Error('Loaded file is not valid SVG"'))}catch(v){n(v)}else n(new Error("Error loading SVG"))}),o.addEventListener("error",()=>n()),o.send()});return t.watchEffect(()=>E(p.value)),(e,r)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createCommentVNode(" eslint-disable vue/no-v-html "),t.createCommentVNode(" eslint-disable vue/html-self-closing "),s.value?(t.openBlock(),t.createElementBlock("svg",t.mergeProps({key:0,ref_key:"svgElem",ref:d,width:"1em",height:"1em"},{...y(s.value),...S(e.$attrs)},{style:`font-size: ${a.size}`,innerHTML:w(s.value)}),null,16,T)):t.createCommentVNode("v-if",!0),t.createCommentVNode(" eslint-enable vue/no-v-html "),t.createCommentVNode(" eslint-enable vue/html-self-closing ")],2112))}});exports.default=b;
